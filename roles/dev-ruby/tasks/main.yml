---
# File: roles/dev-ruby/tasks/main.yml

- name: Install rbenv stuff
  homebrew: name={{ item }}
  with_items:
    - rbenv
    - ruby-build

- name: Install ruby versions
  shell: rbenv install {{ item }}
  args:
    creates: ~/.rbenv/versions/{{ item }}
  with_items: ruby_versions

- name: Install ruby gems
  gem: name="{{ item[0] }}" executable=~/.rbenv/shims/gem
  environment:
    RBENV_VERSION: "{{ item[1] }}"
  tags:
    - ruby
  with_nested:
    - ruby_gems
    - ruby_versions
